import{a as c}from"./helper-1d4e7fcb.js";$(document).on("keyup",".duration",function(){var e=$(this).val();e==="0"&&e.length===1&&$(this).val("1")});let u=$("#table-url").val();$(".select2").select2({dropdownParent:$("#modal-job"),width:"100%"});$(".users-select2").select2();$(".project-select2").select2();$("#table").DataTable({ordering:!0,serverSide:!0,processing:!0,autoWidth:!1,responsive:!0,ajax:{url:u,data:function(e){$("#date-from").val()!=""&&(e.date_from=$("#date-from").val()),$("#date-to").val()!=""&&(e.date_to=$("#date-to").val()),$("#user-id").val()!=""&&(e.user_id=$("#user-id").val()),$("#category").val()!=""&&(e.category=$("#category").val()),$("#subcategory").val()!=""&&(e.subcategory=$("#subcategory").val())}},columns:[{data:"DT_RowIndex",name:"DT_RowIndex",width:"40px",orderable:!1,searchable:!1},{data:"employee",name:"user.name",width:"200px",className:"text-wrap"},{data:"title",name:"title",width:"200px",className:"text-wrap"},{data:"subcat",name:"subcategory.name",width:"100px",className:"text-wrap"},{data:"duration",name:"duration",width:"100px"},{data:"opsi",name:"opsi",orderable:!1,searchable:!1,width:"30px"}],columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:1},{responsivePriority:3,targets:2},{responsivePriority:4,targets:3},{responsivePriority:5,targets:4},{responsivePriority:6,targets:5}]});$("#btn-filter").click(function(){reloadTable("#table")});$("#table").on("click",".edit",function(){let e=$(this).data("id"),t=$("#edit-url").val();t=t.replace(":id",e),ajaxGet(t).done(function(a){console.log(a.data),$(".modal-title").empty().append("Edit Job"),$("#id").val(a.data.id),$("#subcategory-id").val(a.data.subcategory_id).trigger("change"),$("#user-edit-id").val(a.data.user_id).trigger("change"),$("#title").val(a.data.title),$("#description").val(a.data.description),$("#duration").val(a.data.duration);let l=new Date(a.data.created_at);$("#date").val(l.toString("yyyy-M-dd")),$("#modal-job").modal("show"),o()})});$("#form-job").submit(function(e){e.preventDefault();let t=$("#id").val(),a=new FormData(this),l="#btn-submit",r="#table",d="#form-job",s="#modal-job";if(t!=="")var i=$("#update-url").val();else var i=$("#save-url").val();c(i,a,l).done(function(n){notifySuccess(n.message),reloadTable(r),$(s).modal("hide"),$(d)[0].reset(),$(".select2").val("").trigger("change")})});$("#table").on("click",".delete",function(){let e=$(this).data("id"),t=$("#delete-url").val(),a="#table";ajaxDel(t,e,!1,"sweetSuccess",a)});$("#btn-add").click(function(){$("#modal-job").modal("show"),$(".modal-title").empty().append("Add Category");let e="#form-job";$(e)[0].reset(),$(".select2").val("").trigger("change"),$("#id").val(""),o()});function o(){$(".form-control").removeClass("is-invalid"),$(".form-select").removeClass("is-invalid")}
