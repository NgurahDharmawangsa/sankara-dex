let u=$("#table-url").val();$("#table").DataTable({order:[[0,"desc"]],ordering:!0,serverSide:!0,processing:!0,autoWidth:!1,responsive:!0,ajax:{url:u},columns:[{data:"updated_at",name:"updated_at",className:"d-none"},{data:"DT_RowIndex",name:"DT_RowIndex",width:"40px",orderable:!1,searchable:!1},{data:"name",name:"name",orderable:!0,searchable:!0},{data:"email",name:"email",orderable:!0,searchable:!0},{data:"opsi",name:"opsi",orderable:!1,searchable:!1}],columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:1},{responsivePriority:3,targets:3}]});$("#btn-add").click(function(){$("#modal-user").modal("show"),$(".modal-title").empty().append("Add New User"),$(".password-label").append(' <span style="color:red">*</span>'),$("#user_id").val(null).trigger("change"),r()});$(".btn-close").click(function(){$(".password-label span").remove()});$("#form-user").submit(function(l){l.preventDefault();let a=$("#id").val(),e=new FormData(this),s="#btn-submit",d="#table",i="#form-user",o="#modal-user";if(a!=="")var t=$("#update-url").val();else var t=$("#create-url").val();ajaxPost(t,e,s).done(function(n){notifySuccess(n.message),reloadTable(d),$(o).modal("hide"),$(i)[0].reset()})});$("#table").on("click",".edit",function(){let l=$(this).data("id"),a=$("#edit-url").val();a=a.replace(":id",l),ajaxGet(a).done(function(e){$(".modal-title").empty().append("Edit User"),$("#id").val(e.data.id),$("#name").val(e.data.name),$("#email").val(e.data.email),$(".password-label span").remove(),$("#user_id").val(e.data.user_id).trigger("change"),$("#modal-user").modal("show"),r()})});$("#table").on("click",".delete",function(){let l=$(this).data("id"),a=$("#delete-url").val(),e="#table";ajaxDel(a,l,!1,"sweetSuccess",e)});function r(){$(".form-control").removeClass("is-invalid"),$(".form-select").removeClass("is-invalid")}
